{% extends "base.html" %}
{% block title %}Add User{% endblock %}
{% load static %}

{% block content %}
    <li>
        <a href="javascript:window.history.back();" class="btn btn-outline-primary">
            <i class="fas fa-arrow-left backBtn"></i> Back
        </a>
    </li>
{% endblock %}

{% block body_block %}
    <style type="text/css">
        #viewstudentForm label.error {
            display: inline-block;
            max-width: 100%;
            margin-bottom: 5px;
            font-weight: bold;
            color: #e82d2d;
            width: 100%;
        }

        button, .btn-primary1 {
            background-color: #ebeff3 !important;
            border-color: #edf1f5 !important;
            font-size: 15px !important;
            border-radius: 35px !important;
        }

    </style>

    <!-- Content Wrapper. Contains page content -->



    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1></h1>
                    </div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Home</a></li>
                            <li class="breadcrumb-item active">View Student</li>
                        </ol>
                    </div>
                </div>
            </div><!-- /.container-fluid -->
        </section>

        <!-- Main content -->
        <section class="content">
            <div class="container-fluid">
                <div class="row">

                    <!-- right column -->
                    <div class="col-md-8" style="margin: 0 auto;">
                        <!-- general form elements disabled -->
                        <div class="card card-primary">
                            <div class="card-header">
                                <h3 class="card-title">View Student</h3>
                            </div>
                            <!-- /.card-header -->
                            <form role="form" method="post" id="viewstudentForm" enctype="multipart/form-data">
                                <div class="card-body">
                                    <div class="card-body">
                                        {% csrf_token %}
                                        <legend>Student Details</legend>
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <input type="hidden" name="student_id_pk" id="student_id_pk"
                                                       value="{{ student_id_pk }}">

                                                <div class="form-group">
                                                    <label>First Name <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" name="student_first_name"
                                                           id="student_first_name" placeholder="Student First Name">
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Gender</label>
                                                    <select class="form-control" id="gender" name="gender">
                                                        <option value="">---select---</option>
                                                        <option value="Male">Male</option>
                                                        <option value="Female">Female</option>
                                                        <option value="Other">Other</option>

                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Date Of Birth <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" name="dob"
                                                           id="dob" placeholder="Date Of Birth">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">


                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Roll Number <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" name="roll_no"
                                                           id="roll_no" placeholder="Roll Number">
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>GR Number <span class="text-danger">*</span></label>
                                                    <input type="text" class="form-control" name="gr_no"
                                                           id="gr_no" placeholder="GR Number">
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Class </label>
                                                    <input type="text" class="form-control" name="class_label"
                                                           id="class_label" placeholder="Class Label">
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row">

                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Division</label>
                                                    <input type="text" class="form-control" name="division_label"
                                                           id="division_label" placeholder="Division Label">
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label for="customFile">Student Photo</label>
                                                    <div class="custom-file">
                                                        <input type="file" class="custom-file-input" name="user_photo"
                                                               id="user_photo">
                                                        <label class="custom-file-label" for="user_photo">Choose
                                                            file</label>
                                                    </div>
                                                    <div class="input-group-append">
                                                        <span><img id="image" name="image" width="50" height="50"></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">


                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Address</label>
                                                    <input type="text" class="form-control" name="student_address"
                                                           id="student_address" placeholder="Student Address">
                                                </div>
                                            </div>

                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Country <span class="text-danger">*</span></label>
                                                    <select class="form-control" id="country" name="country">
                                                        <option value="" selected="selected">---select---</option>
                                                        {% for country_data in country_data %}
                                                            <option value="{{ country_data.id }}">{{ country_data.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
<div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>State <span class="text-danger">*</span></label>
                                                    <select class="form-control" id="state" name="state">
                                                        <option value="" selected="selected">---select---</option>
                                                        {% for state_data in state_data %}
                                                            <option value="{{ state_data.id }}">{{ state_data.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="row">

                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>City <span class="text-danger">*</span></label>
                                                    <select class="form-control" id="city" name="city">
                                                        <option value="" selected="selected">---select---</option>
                                                        city_data
                                                        {% for city_data in city_data %}
                                                            <option value="{{ city_data.id }}">{{ city_data.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="form-group">
                                                    <label>Pincode</label>
                                                    <input type="text" class="form-control" name="pincode" id="pincode"
                                                           placeholder="Pincode">
                                                </div>
                                            </div>
                                        </div>
                                            <legend>Primary Parent Details</legend>
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>First Name <span class="text-danger">*</span></label>
                                                        <input type="text" class="form-control"
                                                               name="p_parent_first_name"
                                                               id="p_parent_first_name" placeholder="First Name">
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>Last Name <span class="text-danger">*</span></label>
                                                        <input type="text" class="form-control"
                                                               name="p_parent_last_name"
                                                               id="p_parent_last_name" placeholder="Last Name">
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>Mobile No<span class="text-danger">*</span></label>
                                                        <input type="text" class="form-control"
                                                               name="p_parent_mobile_no"
                                                               id="p_parent_mobile_no"
                                                               placeholder="Primary Parent Mobile No" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">

                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>Email Id <span class="text-danger">*</span></label>
                                                        <input type="text" class="form-control" name="p_parent_email_id"
                                                               id="p_parent_email_id"
                                                               placeholder="Primary Parent Email Id">
                                                    </div>
                                                </div>
                                            </div>

<legend>Secondary Parent Details</legend>
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>First Name</label>
                                                        <input type="text" class="form-control"
                                                               name="s_parent_first_name"
                                                               id="s_parent_first_name" placeholder="First Name">
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>Middle Name </label><input type="text" class="form-control"
                                                               name="s_parent_middle_name"
                                                               id="s_parent_middle_name" placeholder="Middle Name">
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>Last Name </label>
                                                        <input type="text" class="form-control"
                                                               name="s_parent_last_name"
                                                               id="s_parent_last_name" placeholder="Last Name">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>Mobile No</label>
                                                        <input type="text" class="form-control"
                                                               name="s_parent_mobile_no"
                                                               id="s_parent_mobile_no"
                                                               placeholder="Secondary Parent Mobile No">
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label>Email Id </label>
                                                        <input type="text" class="form-control" name="s_parent_email_id"
                                                               id="s_parent_email_id"
                                                               placeholder="Secondary Parent Email Id">
                                                    </div>
                                                </div>
                                            </div>


                                        </div>

                                    </div>

                                    <div class="card-footer">
                                        <button type="submit" style="margin-left: 220px;" class="btn btn-primary">
                                            Submit
                                        </button>


                                    </div>
                            </form>


                            <!-- /.card-body -->
                        </div>

                        <!-- /.card -->

                    </div>
                    <!--/.col (right) -->
                </div>
                <!-- /.row -->
            </div><!-- /.container-fluid -->
        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
<script>
    $(document).ready(function(){
        $("#viewstudentForm :input").prop("disabled", true);
    });
</script>
   <script type="text/javascript">
        {% autoescape off %}
            var result_data = {{ student_details }};
            var primary_parent_dtl = {{ primary_parent_dtl }}
            var secondary_parent_dtl = {{ secondary_parent_dtl }}
            console.log(result_data);
            console.log(primary_parent_dtl)
            console.log(secondary_parent_dtl)
            var i = 1;
            var index = 0;
            $("#student_first_name").val(result_data[0])
            $("#dob").val(result_data[13])
            $("#roll_no").val(result_data[8])
            $("#gr_no").val(result_data[9])
            $("#country").val(result_data[4]);
            $("#state").val(result_data[5])
            $("#city").val(result_data[6])
            $("#pincode").val(result_data[7])
            $("#student_address").val(result_data[3])
            $("#gender").val(result_data[12])
            $("#class_label").val(result_data[11])
            $("#division_label").val(result_data[15])
            $('#image').attr('src',"http://localhost:8000/"+result_data[10]);
            $("#p_parent_first_name").val(primary_parent_dtl[1])
            $("#p_parent_last_name").val(primary_parent_dtl[2])
            $("#p_parent_mobile_no").val(primary_parent_dtl[0])
            $("#p_parent_email_id").val(primary_parent_dtl[3])

            $("#s_parent_first_name").val(secondary_parent_dtl[1])
            $("#s_parent_middle_name").val(secondary_parent_dtl[2])
            $("#s_parent_last_name").val(secondary_parent_dtl[3])
            $("#s_parent_mobile_no").val(secondary_parent_dtl[0])
            $("#s_parent_email_id").val(secondary_parent_dtl[4])

        {% endautoescape %}


    </script>

{% endblock %}
